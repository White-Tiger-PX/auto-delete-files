<p align="center">
  <a href="README.ru.md"><img src="https://img.shields.io/badge/Русский-Readme-blue" alt="Russian" /></a>&nbsp;&nbsp;
  <a href="README.md"><img src="https://img.shields.io/badge/English-Readme-blue" alt="English" /></a>&nbsp;&nbsp;
  <img src="https://visitor-badge.laobi.icu/badge?page_id=White-Tiger-PX.auto-delete-files" alt="visitors" />&nbsp;&nbsp;
  <img src="https://img.shields.io/github/stars/White-Tiger-PX/auto-delete-files?style=social" alt="GitHub stars" />
</p>

# auto-delete-files

Этот скрипт предназначен для удаления файлов и папок на основе определенных условий, таких как время последнего изменения и первое обнаружение файла.

## Описание

Утилита выполняет следующие действия:

- Сканиует указанную директорию и её подкаталоги.
- Проверяет файлы на основе их времени последнего изменения и времени первого обнаружения.
- Удаляет файлы и папки, которые соответствуют заданным условиям.
- Предоставляет подробный лог действий (если включена опция сохранения логов).

## Конфигурация

Все настройки указываются в файле `settings.json`. Пример структуры конфигурации:

```json
{
    "save_logs": true,
    "log_folder": "logs",
    "directory_with_scanned_directories": "scanned_directories",
    "directories": [
        {
            "path": "C:/path/to/you/folder",
            "time_limit_for_modified_time": 604800,
            "time_limit_for_first_seen": 604800,
            "action_by_last_modified": true,
            "action_by_first_seen": true,
            "delete_entire_folders": true,
            "file_name_exceptions": [],
            "directory_name_exceptions": []
        }
    ]
}
```

### Описание полей

- **save_logs**: Булевое значение, указывающее, нужно ли сохранять логи в файл.
- **log_folder**: Папка, в которой будут сохраняться логи (если `save_logs` установлено в `true`).
- **directory_with_scanned_directories**: Папка, где будут сохраняться данные об отсканированных директориях.
- **directories**: Список директорий для обработки. Каждая директория должна содержать следующие параметры:
  - **path**: Путь к обрабатываемой директории.
  - **time_limit_for_modified_time**: Время (в секундах) с момента последнего изменения, после которого файл подходит под условия действия.
  - **time_limit_for_first_seen**: Время (в секундах), за которое файл считается устаревшим (по времени первого обнаружения).
  - **action_by_last_modified**: Булевое значение, указывающее, следует ли учитывать время последнего изменения файла.
  - **action_by_first_seen**: Булевое значение, указывающее, следует ли учитывать время первого обнаружения файла.
  - **delete_entire_folders**: Булевое значение, указывающее, можно ли удалять папки целиком, если все файлы в них удовлетворяют условиям для удаления и пустые папки.
  - **file_name_exceptions**: Список строк с исключениями для имени файлов, которые не должны удаляться.
  - **directory_name_exceptions**: Список строк с исключениями для имени директорий, которые не должны обрабатываться.

## Примечания

- Скрипт использует стандартные библиотеки Python, поэтому не требуется дополнительных зависимостей.
- Для работы с большими объемами данных и многими папками потребуется время на выполнение.
- Убедитесь, что пути в `settings.json` указаны корректно и соответствуют операционной системе (для Windows используйте обратный слэш `\`).

### Автоматическое выполнение скрипта

Чтобы скрипт выполнялся автоматически при запуске системы, настройте задачу в **Планировщике заданий Windows**:

1. Откройте **Планировщик заданий**, найдя его в меню Пуск (или нажмите `Win + R`, введите `taskschd.msc` и нажмите Enter).
2. Нажмите на **Создать задачу** в правой панели.
3. Укажите имя для вашей задачи (например, "Установить случайные обои").
4. Перейдите на вкладку **Триггеры** и нажмите **Создать**.
   - Установите параметр **Начать задачу** на **При входе в систему**, чтобы задача запускалась при каждом входе в систему.
   - Опционально, установите флажок **Повторять задачу каждые** и укажите интервал (например, каждый час), если хотите, чтобы задача выполнялась периодически.
5. Перейдите на вкладку **Действия**, нажмите **Создать** и выберите **Запуск программы**.
6. Выберите исполнимый файл Python. По умолчанию он находится по следующему пути:
   `C:\Users\ВАШЕ_ИМЯ_ПОЛЬЗОВАТЕЛЯ\AppData\Local\Programs\Python\ВАША_ВЕРСИЯ_python\python.exe`.
7. В поле **Добавить аргументы** укажите полный путь к вашему скрипту. Например:
   `(C:\путь\к\вашему\auto_delete_files.py)`
   *(Убедитесь, что путь заключён в кавычки, если он содержит пробелы.)*
8. Нажмите **ОК**, чтобы сохранить задачу.

<div style="justify-content: space-between; align-items: center;">
  <div style="text-align: center;">
    <img src="Task Scheduler - General.png" alt="Task Scheduler - General" width="75%" />
  </div>

  <div style="text-align: center;">
    <img src="Task Scheduler - Triggers.png" alt="Task Scheduler - Triggers" width="75%" />
  </div>

  <div style="text-align: center;">
    <img src="Task Scheduler - Actions.png" alt="Task Scheduler - Actions" width="75%" />
  </div>
</div>
